<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <script src="https://cdn.jsdelivr.net/npm/iconify-icon@1.0.7/dist/iconify-icon.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700;800;900&display=swap"
        rel="stylesheet">
    <link rel="stylesheet" href="sign.css">
    <title>Login</title>
</head>

<body>
    <div class="container">
        <div class="innercontent">
            <div class="card">
                <div class="inside">
                    <div class="head">
                        <span><iconify-icon icon="mingcute:safety-certificate-fill"></iconify-icon></span>                    </div>
                    <div class="form">
                        <h3>Login</h3>
                        <form action="">

                            <input type="text" name="" id="username" class="inp" placeholder="Username">
                            <input type="password" name="" class="inp" id="pass" placeholder="Password">

                            <div class="ch">
                                <div class="r">
                                    <input type="checkbox" class="chk" name="chk" id="">
                                    <label for="chk">Remember Me</label>
                                </div>
                                <a href="">forgot password?</a>
                                <a href="signup.html"> create account</a>
                            </div>

                            <input type="submit" class="inp sub" value="Login">
                        </form>
                    </div>
                </div>

            </div>
        </div>
    </div>
    <script>

// const pass = document.getElementById("password");
// const email = document.getElementById("email");
const form = document.querySelector("form")



 function get(){
    if(localStorage.getItem("patients")){
        return JSON.parse(localStorage.getItem("patients"))
     }
     else return []
}



form.addEventListener("submit",(e)=>{
 
    e.preventDefault();
    const email = document.getElementById('username').value;
    const password = document.getElementById("pass").value;
    
    let tab = get();
    
    
    
    let result = document.getElementById("result")
    


    
    tab = tab.filter(el => (el.email == email))
    console.log(tab)
        if(tab.length){
            if(tab[0].password != password){
                console.log("wrong password")
                result.innerHTML="Mauvais mot de passe";
                result.style.color ="orangered"
            }
            else{
                console.log("bien connect√©");
                // let session = JSON.parse(localStorage.getItem("session"))?[]:[];
        
                
                window.location.href = "./dashboard.html";
                
            }
        }
        else{
            console.log("Username inexistant")
            result.innerHTML="Email inexistant";
            result.style.color ="red"
        }
        
});
    </script>
</body>

</html>
